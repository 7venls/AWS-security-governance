# IAM
"誰が、何を、どこまでできるか"を決めるサービス。

IAMを「セキュリティの玄関」と理解する。AWSへの入り口管理。

---

## 4つの基本要素

### ① ユーザー（user)

人間やアプリケーションの"個人アカウント"。

【例】

・あなた（管理者）

・メンバー（開発者）

・CI/CD(機関ユーザー)

「１人１アカウント」が原則。

※ 共有アカウント禁止

### ② グループ（Group）

ユーザーをまとめて権限を付与する入れ物。

【例】

・Adminグループ

・Developerグループ

実務：人事異動のときに便利。（権限を個別に外す必要がない）

### ③ ロール（Role）

サービスに権限を与える"箱"。

人間ではなくAWSの中のサービスが使う権限。

【例】

・EC2 がS3を触る。

・Lambda が DynamoDBを触る。

人間はユーザー、サービスはロール。

### ④ ポリシー（Policy）

「許可・禁止」のルールブック。

JSONが書かれている権限の定義。

【例】

・S3 の読み取りだけOK。

・EC2 を作成できる。

・IAM 触れない。

ポリシーが"できること"を決める。

---

## ルートアカウントを触らない理由

AWS 契約時に作った最初のアカウント = Root

これは、最強権限を持つため絶対に日常利用しない。

【理由】

・事故ったら終わり。

・削除できない。

・IAM 制御外。

---

## ルートアカウントを使わない理由

・課金変更できる。

・全データ削除できる。

・全サービス消せる。

・複数の MFA 設定できる。

・IAM 自体消せる。

【実務では】

・ルートは最初の日だけ使って終わり（MFA 設定のため）。

・普段は IAM ユーザーで作業。

・権限は必要最小限だけ。

これが AWS の標準ルール。

---

# ポリシー

"このユーザーにどの操作を許可するか"を定義したJSONの定義。

### AWS管理ポリシー

AWS が用意したポリシー。

自動で更新されるため便利だが、細かい調整はできない。

### カスタマー管理ポリシー

自分で作るポリシー。

必要な権限だけを最小で定義できるので実務向け。

### マネージドポリシー(Managed Policy)

AWS が用意した定義済みの権限セット。安全・標準。

【例】

・AdministratorAccess(全体操作可能)

・ReadOnlyAccess(閲覧のみ可能)

・s3FullACCESS(S3 に対してフル)

### インラインポリシー(Inline Policy)

１ユーザー/１ロール専用のポリシー。カスタム用。

---

## 最小権限

必要な操作だけ許可。

---
