# ネットワークとは

ネットワーク = 通信するための道路

・EC2 ←---→ EC2

・EC2 ←---→ インターネット

これは全部「道路」がないと通信できない。

---

# IP アドレスとは

IP は機械の住所。

【例】

・192.168.0.5

・10.0.1.23

・54.12.55.110

インターネットの世界では、住所がないと通信できない。

・メールを送るもの。

・Web を開くもの。

・SSH するもの。

全部相手の住所（IP）があって成立。

---

# パブリック IP とプライベート IP の違い

### パブリック IP 

・世界中から見える住所。

### プライベート IP

・会社や家庭の中だけで使う住所。

・外（インターネット）から見えない。

・自由に使える。

・範囲は決められている。

【使える範囲】

・10.0.0.0 ~ 10.255.255.255

・172.16.0.0 ~ 172.16.255.255

・192.168.0.0 ~ 192.168.255.255

AWS で VPC を作るときはこの範囲内で選ぶ。

---

# CIDR とは

CIDR = 「住所を何人で共有できるかのルール」

【例】

・10.0.0.0/16

/16 がポイント。

これは「上16ビットがネットワーク部分」の意味。

残りのビットがホスト用。

計算式：2 ^ (32-16) = 65536

つまり /16 の中には65536アドレスが存在する。

---

# VPC とは

AWS 上に作る論理的に分解された仮想のネットワーク。

VPC = AWS 上の自分専用ネットワークの箱。

・他人の AWS とは完全に分離。

・住所 (IP) も自分で決められる。

・出入口 （IGW） も自分で管理できる。

---

## なぜ VPC が必要なのか？

### もし VPC がなかったら…

・みんな同じネットワーク

・住所がぐちゃぐちゃ

・勝手に通信できて危険

### VPC があるから…

・自分専用の安全な空間

・通信ルールを自分で決められる。

・セキュリティ設計ができる。

#### AWS セキュリティの土台 = VPC

---

# サブネットとは

・VPC をエリアで区切った部屋。

【例えで考える】

・VPC：マンション

・サブネット：各部屋

役割ごとに部屋を分ける。

## なぜサブネットを分けるのか？












# なぜサブネットを分けるのか？

### 1. セキュリティ

・外に出す必要があるものだけ外へ

・それ以外は閉じ込める

全部を外に出さない。

### 2. 管理のしやすさ

・Web用

・DB用

・管理用

役割が混ざると事故る可能性がある。

### 3. AWSの設計ルール

・サブネットはAZに紐づく

・冗長化の基本単位

AZをまたぐサブネットは作れない。

# Public / Privateの違い

インターネットへのルートがあるか。

### Public Subnet

・ルートテーブルに 0.0.0.0/0 → IGW

・インターネット通信できる

・Webサーバーなどを置く

### Private Subnet

・上のルートがない

・直接インターネットに出られない

・DB・内部処理用

名前じゃなく「ルート」で決まる

---

# IGW

IGW = インターネットへの玄関

【例えで考える】

・VPC：建物

・サブネット：部屋

・IGW：正面玄関

玄関がない建物は、外に出られない。

### IGW の役割

・VPCとインターネットをつなぐ

・双方向通信を可能にする

通信の出口であり入口。

### なぜ IGW は　VPC に1つだけ？

・VPC全体の出口だから

・サブネットごとに持つものではない

・AWSの設計上、VPCに1つ

各部屋（サブネット）は同じ玄関を使う。

### IGW がないとどうなるか？

外と一切通信できない

・EC2から yum update できない

・インターネットからアクセス不可

・Public Subnetでも意味がない

IGWが無い = Publicは存在しない

---

# RT(ルートテーブル)

ルートテーブル = 道案内（地図）

【例えで考える】

・サブネット：部屋

・ルートテーブル：「この部屋から出たら、どこへ行く？」

道が書いてなければ、どこにも行けない。

---

# SG

SG = 仮想ファイアウォール（鍵）

【例えで考える】

・VPC：建物

・サブネット：部屋

・ルートテーブル：道

・SG：ドアの鍵

道があっても、鍵が閉まってたら入れない。
