# S3

【 S3 = インターネット越しに使えるファイル置き場 】

・S3は サーバではなくオブジェクトストレージ。

・OSは存在せず、SSHログインはできない。

・ファイルは「オブジェクト」として保存される。

---

## EC2との違い

【EC2】

・サーバ	

・OSがある	

・SSHできる

・ディスク(EBS)

【S3】

・ストレージ

・OSはない

・SSH不可

・オブジェクト

S3は「ログインして操作する場所」じゃない。

---

## バケット

・バケットはオブジェクトを入れる入れ物。

・バケットタイプは「汎用（General purpose）」が基本。

・バケット名は世界で一意。

・リージョンは東京（ap-northeast-1）を選択。

---

## セキュリティの考え方

・S3は デフォルト非公開。

・ファイルを置いただけでは公開されない。

・パブリックアクセスをブロックしている状態ではURLに直接アクセスすると 403 AccessDenied になる。

---

## 権限管理

・ACLは無効（推奨）。

・オブジェクト所有者はバケット所有者。

・権限管理は バケットポリシー / IAM で行うのが現在の主流。

---

# オブジェクト操作（PUT / GET）

## PUT / GET の意味

・PUT：ローカル → S3 にオブジェクトを保存。

・GET：S3 → ローカルにオブジェクトを取得。

・コンソールからのダウンロードはIAM認証があるため成功する。

---

# S3で静的サイト公開

## URLアクセスと403の理由

・オブジェクトURLは存在しても匿名アクセスが許可されていないため 403 になる。

・「置いた = 公開」ではないことを理解した。

## S3はデフォルト非公開

・バケットを作っただけでは外部公開されない。

・「公開したつもり」では一切アクセスできない（403）。

## 静的ウェブサイトホスティングの役割

・S3を「HTMLを返すWebサーバ」として使える機能。

・index.html がトップページとして扱われる。

## パブリックアクセス制御の考え方

・「ブロックパブリックアクセス」は強力なガード。

・バケットポリシーよりも優先される。

・公開する場合は意図的に解除する必要がある。

## バケットポリシーの役割

・誰に・何を・どこまで許可するかをJSONで定義。

・今回は s3:GetObject のみ許可（最小権限）。

・オブジェクトの「読み取り」だけを公開している。

## よくあるエラーの原因

・403：公開設定不足（ブロックON、ポリシーミス）。

・404：index.html 名称ミス、ホスティング未有効化。

・バケット名1文字違いでもエラーになる。
