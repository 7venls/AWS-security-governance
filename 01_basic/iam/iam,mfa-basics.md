# IAMとは？
IAMを「セキュリティの玄関」と理解する。
AWSへの入り口管理。

“誰が、何を、どこまでできるか”を決めるサービス。

## ４つの基本要素
### ①ユーザー（user）

人間やアプリケーションの“個人アカウント”。

例：

・あなた（管理者）

・メンバー（開発者）

・CI/CD（機関ユーザー）

「１人１アカウント」が原則。

※共有アカウント禁止

### ②グループ(Group)

ユーザーをまとめて権限を付与する入れ物。

例：

・Adminグループ

・Developerグループ

実務：人事異動のときにとても便利。

　　　（権限を個別に外す必要がない）。

### ③ロール(Role)

サービスに権限を与える“箱”。

人間ではなくAWSの中のサービスが使う権限。

例：

・EC2がS3を触る。

・LambdaがDynamoDBを触る。

人間はユーザー、サービスはロール。

### ④ポリシー(Policy)

「許可／禁止」のルールブック。

JSONが書かれている権限の定義。

例：

・S3を読み取りだけOK。

・EC2を作成できる。

・IAM触れない。

ポリシーが“できること”を決める。

# ルートアカウントを触らない理由

AWS契約時に作った最初のアカウント＝Root

これは、最強権限を持つので絶対に日常利用しない。

理由：

・事故ったら終わる。

・削除できない。

・IAM制御外。

・CloudTrailに残り方が特殊。

# ルートアカウントを使わない理由

・課金変更できる。

・全データ削除できる。

・全サービス消せる。

・複数のMFA設定できる。

・IAM自体消せる。

つまり、ミス＝全滅

だから実務では：

・ルートは最初の日だけ使って終わり（MFA設定のため）。

・普段はIAMユーザーで作業。

・権限は必要最小限だけ。

これがAWSの標準ルール。

# IAMポリシーの概念

## ポリシーとは？

“このユーザーにどの操作を許可するか”を定義したJSONの設定。

### AWS管理ポリシーとは？

AWSが用意したポリシー。
自動で更新されるので便利だが、細かい調整はできない。

### カスタマー管理ポリシーとは？

自分で作るポリシー。
必要な権限だけを最小で定義できるので実務向け。

### マネージドポリシー(Managed Policy)

AWSが用意した定義済みの権限セット。安全・標準。

例：

・AdministratorAccess(全体操作可能)

・ReadOnlyAccess(閲覧のみ可能)

・S3FullAccess(S3に対してフル)

### インラインポリシ（Inline Policy)

１ユーザー/１ロール専用のポリシー。カスタム用。

### 最小権限

必要な操作だけ許可。

# MFAとは？

「パスワード＋別の証明」＝MFA

例：パスワード＋スマホアプリの認証コード

この２つある状態が安全の基本。

## なぜMFAが必要か？

AWSのログインは、もしパスワードが漏れたら全部終わり。

・クラウドは全世界からアクセスされる。

・攻撃は２４時間機械で行われる。

・パスワードだけは絶対に守れない。

だから、攻撃者はパスワードを知っていてもスマホを持ってないとログインできない。

これが“守る”ということ。
